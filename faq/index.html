<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <meta
      name="keywords"
      content="microfrontend, micro frontend, micro frontends, micro-frontend, micro-frontends, microservice, javascript"
    />
    <link rel="stylesheet" href="/qiankun/umi.eb884056.css" />
    <script>
      window.routerBase = "/qiankun";
    </script>
    <script>
      //! umi version: 3.2.22
    </script>
    <script>
      var _hmt = _hmt || [];
    </script>
    <script>
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?0f738d9b0ac90574c09183ea85bcfa2e";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
    <title>FAQ</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-show-sidemenu="true" data-show-slugs="false" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:" data-plaintext="true" href="/qiankun/">qiankun</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><a href="/qiankun/guide">Guide</a><a href="/qiankun/api">API</a><a aria-current="page" class="active" href="/qiankun/faq">FAQ</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/umijs/qiankun/releases">Changelog<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><a target="_blank" rel="noopener noreferrer" href="https://v1.qiankun.umijs.org/">1.x<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><a target="_blank" rel="noopener noreferrer" href="https://github.com/umijs/qiankun">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><div class="__dumi-default-locale-select" data-locale-count="2"><span>中文</span></div></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:" href="/qiankun/"></a><h1>qiankun</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="/qiankun/guide">Guide</a></li><li><a href="/qiankun/api">API</a></li><li><a aria-current="page" class="active" href="/qiankun/faq">FAQ</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/umijs/qiankun/releases">Changelog<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a target="_blank" rel="noopener noreferrer" href="https://v1.qiankun.umijs.org/">1.x<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/umijs/qiankun">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><div class="__dumi-default-locale-select" data-locale-count="2"><span>中文</span></div></div><ul class="__dumi-default-menu-list"><li><a aria-current="page" class="active" href="/qiankun/faq">FAQ</a><ul role="slug-list"><li title="Application died in status LOADING_SOURCE_CODE: You need to export the functional lifecycles in xxx entry" data-depth="2" class=""><a href="/qiankun/faq#application-died-in-status-loading_source_code-you-need-to-export-the-functional-lifecycles-in-xxx-entry"><span>Application died in status LOADING_SOURCE_CODE: You need to export the functional lifecycles in xxx entry</span></a></li><li title="Vue Router Error - Uncaught TypeError: Cannot redefine property: $router" data-depth="2" class=""><a href="/qiankun/faq#vue-router-error---uncaught-typeerror-cannot-redefine-property-router"><span>Vue Router Error - Uncaught TypeError: Cannot redefine property: $router</span></a></li><li title="Tips on Using Vue Router" data-depth="2" class=""><a href="/qiankun/faq#tips-on-using-vue-router"><span>Tips on Using Vue Router</span></a></li><li title="a. The main app is using Vue Router&#x27;s hash mode" data-depth="3" class=""><a href="/qiankun/faq#a-the-main-app-is-using-vue-routers-hash-mode"><span>a. The main app is using Vue Router&#x27;s hash mode</span></a></li><li title="b. The main app is using Vue Router&#x27;s history mode" data-depth="3" class=""><a href="/qiankun/faq#b-the-main-app-is-using-vue-routers-history-mode"><span>b. The main app is using Vue Router&#x27;s history mode</span></a></li><li title="Why dynamic imported assets missing?" data-depth="2" class=""><a href="/qiankun/faq#why-dynamic-imported-assets-missing"><span>Why dynamic imported assets missing?</span></a></li><li title="1. With webpack live public path config" data-depth="3" class=""><a href="/qiankun/faq#1-with-webpack-live-public-path-config"><span>1. With webpack live public path config</span></a></li><li title="2. With webpack static public path config" data-depth="3" class=""><a href="/qiankun/faq#2-with-webpack-static-public-path-config"><span>2. With webpack static public path config</span></a></li><li title="Must a sub app asset support cors?" data-depth="2" class=""><a href="/qiankun/faq#must-a-sub-app-asset-support-cors"><span>Must a sub app asset support cors?</span></a></li><li title="How to guarantee the main app stylesheet isolated with sub apps?" data-depth="2" class=""><a href="/qiankun/faq#how-to-guarantee-the-main-app-stylesheet-isolated-with-sub-apps"><span>How to guarantee the main app stylesheet isolated with sub apps?</span></a></li><li title="How to make sub app to run independently?" data-depth="2" class=""><a href="/qiankun/faq#how-to-make-sub-app-to-run-independently"><span>How to make sub app to run independently?</span></a></li><li title="Could I active two sub apps at the same time?" data-depth="2" class=""><a href="/qiankun/faq#could-i-active-two-sub-apps-at-the-same-time"><span>Could I active two sub apps at the same time?</span></a></li><li title="How to extract the common library？" data-depth="2" class=""><a href="/qiankun/faq#how-to-extract-the-common-library？"><span>How to extract the common library？</span></a></li><li title="Does qiankun compatible with ie?" data-depth="2" class=""><a href="/qiankun/faq#does-qiankun-compatible-with-ie"><span>Does qiankun compatible with ie?</span></a></li><li title="How to polyfill IE?" data-depth="3" class=""><a href="/qiankun/faq#how-to-polyfill-ie"><span>How to polyfill IE?</span></a></li><li title="Error Here is no &quot;fetch&quot; on the window env, you need to polyfill it" data-depth="2" class=""><a href="/qiankun/faq#error-here-is-no-fetch-on-the-window-env-you-need-to-polyfill-it"><span>Error Here is no &quot;fetch&quot; on the window env, you need to polyfill it</span></a></li><li title="Does qiankun support the subApp without bundler?" data-depth="2" class=""><a href="/qiankun/faq#does-qiankun-support-the-subapp-without-bundler"><span>Does qiankun support the subApp without bundler?</span></a></li><li title="How to handle subapplication JSONP cross-domain errors?" data-depth="2" class=""><a href="/qiankun/faq#how-to-handle-subapplication-jsonp-cross-domain-errors"><span>How to handle subapplication JSONP cross-domain errors?</span></a></li><li title="404 after refresh of child application？" data-depth="2" class=""><a href="/qiankun/faq#404-after-refresh-of-child-application？"><span>404 after refresh of child application？</span></a></li></ul></li></ul></div></div><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="faq"><a aria-hidden="true" href="#faq"><span class="icon icon-link"></span></a>FAQ</h1><h2 id="application-died-in-status-loading_source_code-you-need-to-export-the-functional-lifecycles-in-xxx-entry"><a aria-hidden="true" href="#application-died-in-status-loading_source_code-you-need-to-export-the-functional-lifecycles-in-xxx-entry"><span class="icon icon-link"></span></a><code>Application died in status LOADING_SOURCE_CODE: You need to export the functional lifecycles in xxx entry</code></h2><p>This error thrown as qiankun could not find the exported lifecycle method from your entry js.</p><p>To solve the exception, try the following steps:</p><ol><li><p>check you have exported the specified lifecycles, see the <a href="/qiankun/guide/getting-started#1-exports-lifecycles-from-sub-app-entry">doc</a></p></li><li><p>check you have set the specified configuration with your bundler, see the <a href="/qiankun/guide/getting-started#2-config-sub-app-bundler">doc</a></p></li><li><p>check your <code>package.json</code> name field is unique between sub apps.</p></li><li><p>Check if the entry js in the sub-app&#x27;s entry HTML is the last script to load. If not, move the order to make it be the last, or manually mark the entry js as <code>entry</code> in the HTML, such as:</p><div class="__dumi-default-code-block"><pre class="prism-code language-html"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="&lt;script src=&quot;/antd.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;/appEntry.js&quot; entry&gt;&lt;/script&gt;
&lt;script src=&quot;https://www.google.com/analytics.js&quot;&gt;&lt;/script&gt;
" data-status="copy"></button><div class="token-line"><span class="token tag punctuation">&lt;</span><span class="token tag">script</span><span class="token tag"> </span><span class="token tag attr-name">src</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">/antd.js</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag punctuation">&gt;</span><span class="token script"></span><span class="token tag punctuation">&lt;/</span><span class="token tag">script</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token tag punctuation">&lt;</span><span class="token tag">script</span><span class="token tag"> </span><span class="token tag attr-name">src</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">/appEntry.js</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"> </span><span class="token tag attr-name">entry</span><span class="token tag punctuation">&gt;</span><span class="token script"></span><span class="token tag punctuation">&lt;/</span><span class="token tag">script</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token tag punctuation">&lt;</span><span class="token tag">script</span><span class="token tag"> </span><span class="token tag attr-name">src</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">https://www.google.com/analytics.js</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag punctuation">&gt;</span><span class="token script"></span><span class="token tag punctuation">&lt;/</span><span class="token tag">script</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div></li></ol><p>If it still not works after the steps above, this is usually due to browser compatibility issues. Try to <strong>set the webpack <code>output.library</code> of the broken sub app the same with your main app registration for your app</strong>, such as:</p><p>Such as here is the main configuration:</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// main app
registerMicroApps([
  {
    name: &#x27;brokenSubApp&#x27;,
    entry: &#x27;//localhost:7100&#x27;,
    container: &#x27;#yourContainer&#x27;,
    activeRule: &#x27;/react&#x27;,
  },
]);
" data-status="copy"></button><div class="token-line"><span class="token comment">// main app</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">registerMicroApps</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    name</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;brokenSubApp&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    entry</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;//localhost:7100&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    container</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;#yourContainer&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    activeRule</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;/react&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>Set the <code>output.library</code> the same with main app registration:</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="module.exports = {
  output: {
    // Keep the same with the registration in main app
    library: &#x27;brokenSubApp&#x27;,
    libraryTarget: &#x27;umd&#x27;,
    jsonpFunction: `webpackJsonp_${packageName}`,
  },
};
" data-status="copy"></button><div class="token-line"><span class="token plain">module</span><span class="token punctuation">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  output</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// Keep the same with the registration in main app</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    library</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;brokenSubApp&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    libraryTarget</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;umd&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    jsonpFunction</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">webpackJsonp_</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">packageName</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="vue-router-error---uncaught-typeerror-cannot-redefine-property-router"><a aria-hidden="true" href="#vue-router-error---uncaught-typeerror-cannot-redefine-property-router"><span class="icon icon-link"></span></a>Vue Router Error - <code>Uncaught TypeError: Cannot redefine property: $router</code></h2><p>If you pass <code>{<!-- --> sandbox: true <!-- -->}</code> to <code>start()</code> function, <code>qiankun</code> will use <code>Proxy</code> to isolate global <code>window</code> object for sub applications. When you access <code>window.Vue</code> in sub application&#x27;s code，it will check whether the <code>Vue</code> property in the proxyed <code>window</code> object. If the property does not exist, it will look it up in the global <code>window</code> object and return it.</p><p>There are three lines code in the <code>vue-router</code> as followed, and it will access <code>window.Vue</code> once the <code>vue-router</code> module is loaded. And the <code>window.Vue</code> in following code is your master application&#x27;s <code>Vue</code>.</p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="if (inBrowser &amp;&amp; window.Vue) {
  window.Vue.use(VueRouter)
}
" data-status="copy"></button><div class="token-line"><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">inBrowser </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access maybe-class-name">Vue</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access maybe-class-name">Vue</span><span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span><span class="token maybe-class-name">VueRouter</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>To solve the error, choose one of the options listed below:</p><ol><li>Use bundler to pack <code>Vue</code> library, instead of CDN or external module</li><li>Rename <code>Vue</code> to other name in master application, eg: <code>window.Vue2 = window.Vue; window.Vue = undefined</code></li></ol><h2 id="tips-on-using-vue-router"><a aria-hidden="true" href="#tips-on-using-vue-router"><span class="icon icon-link"></span></a>Tips on Using Vue Router</h2><p>The qiankun main app activates the corresponding micro app according to the <code>activeRule</code> configuration.</p><h3 id="a-the-main-app-is-using-vue-routers-hash-mode"><a aria-hidden="true" href="#a-the-main-app-is-using-vue-routers-hash-mode"><span class="icon icon-link"></span></a>a. The main app is using Vue Router&#x27;s hash mode</h3><p>When the main app is in hash mode, generally, micro app is also in hash mode. In this case, the base hash path of the main app is assigned to the corresponding micro app (e.g. <code>#base</code>). At this time, if the micro app needs to make a secondary path jump in hash mode (such as <code>#/base1/child1</code>) when there is a base path, you just need to add a prefix for each route yourself.<br/>The base parameter in VueRouter&#x27;s hash mode <a href="https://github.com/vuejs/vue-router/blob/dev/src/index.js#L55-L69" target="_blank" rel="noopener noreferrer">does not support adding a hash path base<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p><h3 id="b-the-main-app-is-using-vue-routers-history-mode"><a aria-hidden="true" href="#b-the-main-app-is-using-vue-routers-history-mode"><span class="icon icon-link"></span></a>b. The main app is using Vue Router&#x27;s history mode</h3><p>When the main app is in history mode and the micro app is also in history mode, it works perfectly. And if the micro app needs to add a base path, just <a href="https://router.vuejs.org/api/#base" target="_blank" rel="noopener noreferrer">set the base property<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> of the sub item.</p><p>When the main app is in history mode and the micro app is in hash mode, it works perfectly.</p><h2 id="why-dynamic-imported-assets-missing"><a aria-hidden="true" href="#why-dynamic-imported-assets-missing"><span class="icon icon-link"></span></a>Why dynamic imported assets missing?</h2><p>Two way to solve that:</p><h3 id="1-with-webpack-live-public-path-config"><a aria-hidden="true" href="#1-with-webpack-live-public-path-config"><span class="icon icon-link"></span></a>1. With webpack live public path config</h3><p>qiankun will inject a live public path variable before your sub app bootstrap, what you need is to add this code at the top of your sub app entry js:</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="__webpack_public_path__ = window.__INJECTED_PUBLIC_PATH_BY_QIANKUN__;
" data-status="copy"></button><div class="token-line"><span class="token plain">__webpack_public_path__ </span><span class="token operator">=</span><span class="token plain"> </span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">__INJECTED_PUBLIC_PATH_BY_QIANKUN__</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>For more details, check the <a href="https://webpack.js.org/guides/public-path/#on-the-fly" target="_blank" rel="noopener noreferrer">webpack doc<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p><div class="__dumi-default-alert" type="info">Runtime publicPath addresses the problem of incorrect scripts, styles, images, and other addresses for dynamically loaded in sub application.</div><h3 id="2-with-webpack-static-public-path-config"><a aria-hidden="true" href="#2-with-webpack-static-public-path-config"><span class="icon icon-link"></span></a>2. With webpack static public path config</h3><p>You need to set your publicPath configuration to an absolute url, and in development with webpack it might be:</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="{
  output: {
    publicPath: `//localhost:${port}`;
  }
}
" data-status="copy"></button><div class="token-line"><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  output</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    publicPath</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">//localhost:</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">port</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="must-a-sub-app-asset-support-cors"><a aria-hidden="true" href="#must-a-sub-app-asset-support-cors"><span class="icon icon-link"></span></a>Must a sub app asset support cors?</h2><p>Yes it is.</p><p>Since qiankun get assets which imported by sub app via fetch, these static resources must be required to support <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS" target="_blank" rel="noopener noreferrer">cors<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p><p>See <a href="https://enable-cors.org/server_nginx.html" target="_blank" rel="noopener noreferrer">Enable Nginx Cors<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p><h2 id="how-to-guarantee-the-main-app-stylesheet-isolated-with-sub-apps"><a aria-hidden="true" href="#how-to-guarantee-the-main-app-stylesheet-isolated-with-sub-apps"><span class="icon icon-link"></span></a>How to guarantee the main app stylesheet isolated with sub apps?</h2><p>Qiankun will isolate stylesheet between your sub apps automatically, you can manually ensure isolation between master and child applications. Such as add a prefix to all classes in the master application, and if you are using <a href="https://ant.design" target="_blank" rel="noopener noreferrer">ant-design<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, you can follow <a href="https://ant.design/docs/react/customize-theme" target="_blank" rel="noopener noreferrer">this doc<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to make it works.</p><h2 id="how-to-make-sub-app-to-run-independently"><a aria-hidden="true" href="#how-to-make-sub-app-to-run-independently"><span class="icon icon-link"></span></a>How to make sub app to run independently?</h2><p>Use the builtin global variable to identify the environment which provided by qiankun master:</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="if (!window.__POWERED_BY_QIANKUN__) {
  render();
}

export const mount = async () =&gt; render();
" data-status="copy"></button><div class="token-line"><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">__POWERED_BY_QIANKUN__</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword">const</span><span class="token plain"> </span><span class="token function-variable function">mount</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">async</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="could-i-active-two-sub-apps-at-the-same-time"><a aria-hidden="true" href="#could-i-active-two-sub-apps-at-the-same-time"><span class="icon icon-link"></span></a>Could I active two sub apps at the same time?</h2><p>When the subapp should be active depends on your <code>activeRule</code> config, like the example below, we set <code>activeRule</code> logic the same between <code>reactApp</code> and <code>react15App</code>:</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="registerMicroApps([
  // define the activeRule by your self
  { name: &#x27;reactApp&#x27;, entry: &#x27;//localhost:7100&#x27;, container, activeRule: () =&gt; window.isReactApp },
  { name: &#x27;react15App&#x27;, entry: &#x27;//localhost:7102&#x27;, container, activeRule: () =&gt; window.isReactApp },
  { name: &#x27;vue app&#x27;, entry: &#x27;//localhost:7101&#x27;, container, activeRule: () =&gt; window.isVueApp },
]);

start({ singular: false });
" data-status="copy"></button><div class="token-line"><span class="token function">registerMicroApps</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// define the activeRule by your self</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">{</span><span class="token plain"> name</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;reactApp&#x27;</span><span class="token punctuation">,</span><span class="token plain"> entry</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;//localhost:7100&#x27;</span><span class="token punctuation">,</span><span class="token plain"> container</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token function-variable function">activeRule</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">isReactApp</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">{</span><span class="token plain"> name</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;react15App&#x27;</span><span class="token punctuation">,</span><span class="token plain"> entry</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;//localhost:7102&#x27;</span><span class="token punctuation">,</span><span class="token plain"> container</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token function-variable function">activeRule</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">isReactApp</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">{</span><span class="token plain"> name</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;vue app&#x27;</span><span class="token punctuation">,</span><span class="token plain"> entry</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;//localhost:7101&#x27;</span><span class="token punctuation">,</span><span class="token plain"> container</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token function-variable function">activeRule</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">isVueApp</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> singular</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>After setting <code>singular: false</code> in <code>start</code> method, <code>reactApp</code> and <code>react15App</code> should be active at the same time once <code>isReactApp</code> method returns <code>true</code>.</p><div class="__dumi-default-alert">Notice that no more than one application that relies on router can be displayed on the page at the same time, as the browser has only one url location, if there is more than one routing apps, it will definitely result in one of them to be 404 found.</div><h2 id="how-to-extract-the-common-library？"><a aria-hidden="true" href="#how-to-extract-the-common-library？"><span class="icon icon-link"></span></a>How to extract the common library？</h2><blockquote><p>Don’t share a runtime, even if all teams use the same framework. - <a href="https://micro-frontends.org/" target="_blank" rel="noopener noreferrer">Micro Frontends<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote><p>Although sharing dependencies isn&#x27;t a good idea, but if you really need it, you can external the common dependencies from sub apps and then import them in master app.</p><p>In the future qiankun will provide a smarter way to make it automatically.</p><h2 id="does-qiankun-compatible-with-ie"><a aria-hidden="true" href="#does-qiankun-compatible-with-ie"><span class="icon icon-link"></span></a>Does qiankun compatible with ie?</h2><p>Yes.</p><p>However, the IE environment (browsers that do not support Proxy) can only use the single-instance pattern, where the <code>singular</code> configuration will be set <code>true</code> automatically by qiankun if IE detected.</p><p>You can find the singular usage <a href="/qiankun/api#startopts">here</a>.</p><h3 id="how-to-polyfill-ie"><a aria-hidden="true" href="#how-to-polyfill-ie"><span class="icon icon-link"></span></a>How to polyfill IE?</h3><p>If you want qiankun (or its dependent libraries, or your own application) to work properly in IE, you need to introduce the following polyfills at the portal <strong>at least</strong>:</p><div class="__dumi-default-alert" type="info">What&#x27;s <a href="https://developer.mozilla.org/en-US/docs/Glossary/Polyfill" target="_blank">polyfill</a></div><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="import &#x27;whatwg-fetch&#x27;;
import &#x27;custom-event-polyfill&#x27;;
import &#x27;core-js/stable/promise&#x27;;
import &#x27;core-js/stable/symbol&#x27;;
import &#x27;core-js/stable/string/starts-with&#x27;;
import &#x27;core-js/web/url&#x27;;
" data-status="copy"></button><div class="token-line"><span class="token keyword module">import</span><span class="token plain"> </span><span class="token string">&#x27;whatwg-fetch&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">import</span><span class="token plain"> </span><span class="token string">&#x27;custom-event-polyfill&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">import</span><span class="token plain"> </span><span class="token string">&#x27;core-js/stable/promise&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">import</span><span class="token plain"> </span><span class="token string">&#x27;core-js/stable/symbol&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">import</span><span class="token plain"> </span><span class="token string">&#x27;core-js/stable/string/starts-with&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword module">import</span><span class="token plain"> </span><span class="token string">&#x27;core-js/web/url&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p><strong>We recommend that you use @babel/preset-env plugin directly to polyfill IE automatically, all the instructions for @babel/preset-env you can found in <a href="https://babeljs.io/docs/en/babel-preset-env" target="_blank" rel="noopener noreferrer">babel official document<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</strong></p><h2 id="error-here-is-no-fetch-on-the-window-env-you-need-to-polyfill-it"><a aria-hidden="true" href="#error-here-is-no-fetch-on-the-window-env-you-need-to-polyfill-it"><span class="icon icon-link"></span></a>Error <code>Here is no &quot;fetch&quot; on the window env, you need to polyfill it</code></h2><p>Qiankun use <code>window.fetch</code> to get resources of the micro applications, but <a href="https://caniuse.com/#search=fetch" target="_blank" rel="noopener noreferrer">some browsers does not support it<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, you should get the <a href="https://github.com/github/fetch" target="_blank" rel="noopener noreferrer">polyfill<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> in the entry.</p><h2 id="does-qiankun-support-the-subapp-without-bundler"><a aria-hidden="true" href="#does-qiankun-support-the-subapp-without-bundler"><span class="icon icon-link"></span></a>Does qiankun support the subApp without bundler?</h2><blockquote><p>Yes</p></blockquote><p>The only change is that we need to declare a script tag, to export the <code>lifecycles</code></p><p>example:</p><ol><li>declare entry script</li></ol><div class="__dumi-default-code-block"><pre class="prism-code language-diff"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charSet=&quot;UTF-8&quot; /&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
  &lt;title&gt;Purehtml Example&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div&gt;
    Purehtml Example
  &lt;/div&gt;
&lt;/body&gt;

+ &lt;script src=&quot;//yourhost/entry.js&quot; entry&gt;&lt;/script&gt;
&lt;/html&gt;
" data-status="copy"></button><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token deleted-arrow deleted">&lt;html lang=&quot;en&quot;&gt;</span></div><div class="token-line"><span class="token deleted-arrow deleted">&lt;head&gt;</span></div><div class="token-line"><span class="token deleted-arrow deleted"></span><span class="token unchanged">  &lt;meta charSet=&quot;UTF-8&quot; /&gt;</span></div><div class="token-line"><span class="token unchanged">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;</span></div><div class="token-line"><span class="token unchanged">  &lt;title&gt;Purehtml Example&lt;/title&gt;</span></div><div class="token-line"><span class="token unchanged"></span><span class="token deleted-arrow deleted">&lt;/head&gt;</span></div><div class="token-line"><span class="token deleted-arrow deleted">&lt;body&gt;</span></div><div class="token-line"><span class="token deleted-arrow deleted"></span><span class="token unchanged">  &lt;div&gt;</span></div><div class="token-line"><span class="token unchanged">    Purehtml Example</span></div><div class="token-line"><span class="token unchanged">  &lt;/div&gt;</span></div><div class="token-line"><span class="token unchanged"></span><span class="token deleted-arrow deleted">&lt;/body&gt;</span></div><div class="token-line"><span class="token deleted-arrow deleted"></span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token inserted-sign inserted">+ &lt;script src=&quot;//yourhost/entry.js&quot; entry&gt;&lt;/script&gt;</span></div><div class="token-line"><span class="token inserted-sign inserted"></span><span class="token deleted-arrow deleted">&lt;/html&gt;</span></div><div class="token-line"><span class="token deleted-arrow deleted"></span></div></pre></div><ol start="2"><li>export lifecycles in the entry</li></ol><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="const render = ($) =&gt; {
  $(&#x27;#purehtml-container&#x27;).html(&quot;Hello, render with jQuery&quot;);
  return Promise.resolve();
}

(global =&gt; {
  global[&#x27;purehtml&#x27;] = {
    bootstrap: () =&gt; {
      console.log(&#x27;purehtml bootstrap&#x27;);
      return Promise.resolve();
    },
    mount: () =&gt; {
      console.log(&#x27;purehtml mount&#x27;);
      return render($)
    },
    unmount: () =&gt; {
      console.log(&#x27;purehtml unmount&#x27;);
      return Promise.resolve();
    },
  };
})(window);
" data-status="copy"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> </span><span class="token function-variable function">render</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">$</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#x27;#purehtml-container&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">html</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, render with jQuery&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation">.</span><span class="token method function property-access">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">(</span><span class="token parameter">global</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  global</span><span class="token punctuation">[</span><span class="token string">&#x27;purehtml&#x27;</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function-variable function">bootstrap</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;purehtml bootstrap&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation">.</span><span class="token method function property-access">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function-variable function">mount</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;purehtml mount&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token function">render</span><span class="token punctuation">(</span><span class="token plain">$</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function-variable function">unmount</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;purehtml unmount&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation">.</span><span class="token method function property-access">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token dom variable">window</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>refer to the <a href="https://github.com/umijs/qiankun/tree/master/examples/purehtml" target="_blank" rel="noopener noreferrer">purehtml examples<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p>At the same time, <a href="#must-a-sub-app-asset-support-cors">the subApp must support the CORS</a></p><h2 id="how-to-handle-subapplication-jsonp-cross-domain-errors"><a aria-hidden="true" href="#how-to-handle-subapplication-jsonp-cross-domain-errors"><span class="icon icon-link"></span></a>How to handle subapplication JSONP cross-domain errors?</h2><p>qiankun will convert the dynamic script loading of the subapplication (such as JSONP) into a fetch request, so the corresponding back-end service needs to support cross-domain, otherwise it will cause an error.</p><p>In singular mode, you can use the <code>excludeAssetFilter</code> parameter to release this part of the resource request, but note that the resources released by this option will escape the sandbox, and the resulting side effects need to be handled by you.</p><p>If you use JSONP in not-singular mode, simply using <code>excludeAssetFilter</code> does not achieve good results, because each application is isolated by the sandbox; you can provide a unified JSONP tool in the main application, and the subapplication just calls the tool.</p><h2 id="404-after-refresh-of-child-application？"><a aria-hidden="true" href="#404-after-refresh-of-child-application？"><span class="icon icon-link"></span></a>404 after refresh of child application？</h2><p>It is usually because you are routing in Browser mode, which requires the server to open it. Specific configuration mode reference:</p><ul><li><a href="https://router.vuejs.org/guide/essentials/history-mode.html" target="_blank" rel="noopener noreferrer">HTML5 History Mode<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://reactrouter.com/web/api/BrowserRouter" target="_blank" rel="noopener noreferrer">browserRouter<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/kuitos/qiankun/edit/master/docs/faq/README.md">Edit this doc on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="Last Update: ">8/24/2020, 3:33:43 AM</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script>
      (function () {
        if (!location.port) {
          (function (i, s, o, g, r, a, m) {
            i["GoogleAnalyticsObject"] = r;
            (i[r] =
              i[r] ||
              function () {
                (i[r].q = i[r].q || []).push(arguments);
              }),
              (i[r].l = 1 * new Date());
            (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m);
          })(
            window,
            document,
            "script",
            "//www.google-analytics.com/analytics.js",
            "ga"
          );
          ga("create", "UA-157295698-1", "auto");
          ga("send", "pageview");
        }
      })();
    </script>
    <script src="/qiankun/umi.8086029f.js"></script>
  </body>
</html>
