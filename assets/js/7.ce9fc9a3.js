(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{350:function(t,a,s){"use strict";s.r(a);var n=s(37),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[t._v("#")]),t._v(" API")]),t._v(" "),s("h2",{attrs:{id:"route-based-configuration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#route-based-configuration"}},[t._v("#")]),t._v(" Route based configuration")]),t._v(" "),s("p",[t._v("Suitable for route-based scenarios.")]),t._v(" "),s("p",[t._v("By linking the micro-application to some url rules, the function of automatically loading the corresponding micro-application when the browser url changes.")]),t._v(" "),s("h3",{attrs:{id:"registermicroapps-apps-lifecycles"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#registermicroapps-apps-lifecycles"}},[t._v("#")]),t._v(" "),s("code",[t._v("registerMicroApps(apps, lifeCycles?)")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Parameters")]),t._v(" "),s("ul",[s("li",[t._v("apps - "),s("code",[t._v("Array<RegistrableApp>")]),t._v(" - required, registration information for the child application")]),t._v(" "),s("li",[t._v("lifeCycles - "),s("code",[t._v("LifeCycles")]),t._v(" - optional, global sub app lifecycle hooks")])])]),t._v(" "),s("li",[s("p",[t._v("Type")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("RegistrableApp")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("name - "),s("code",[t._v("string")]),t._v(" - required, the name of the child application and must be unique between the child applications.")])]),t._v(" "),s("li",[s("p",[t._v("entry - "),s("code",[t._v("string | { scripts?: string[]; styles?: string[]; html?: string }")]),t._v(" - required, The entry url of the child application.")])]),t._v(" "),s("li",[s("p",[t._v("container - "),s("code",[t._v("string | HTMLElement")]),t._v(" - requiredï¼ŒA selector or Element instance of the container node of a micro application. Such as "),s("code",[t._v("container: '#root'")]),t._v(" or "),s("code",[t._v("container: document.querySelector('#root')")]),t._v(".")])]),t._v(" "),s("li",[s("p",[t._v("activeRule -  - "),s("code",[t._v("string | (location: Location) => boolean | Array<string | (location: Location) => boolean>")]),t._v(" - required,activation rules for micro-apps.")]),t._v(" "),s("ul",[s("li",[t._v("Support direct configuration of string or string array, such as "),s("code",[t._v("activeRule: '/app1'")]),t._v(" or "),s("code",[t._v("activeRule: ['/app1', '/app2']")]),t._v(", when configured as a string, it will directly follow the path part in the url Do a prefix match. A successful match indicates that the current application will be activated.")]),t._v(" "),s("li",[t._v("Support to configure an active function or a group of active functions. The function will pass in the current location as a parameter. When the function returns true, it indicates that the current micro application will be activated. Such as "),s("code",[t._v("location => location.pathname.startsWith ('/app1')")]),t._v(".")])]),t._v(" "),s("p",[t._v("Example rules:")]),t._v(" "),s("p",[s("code",[t._v("'/app1'")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("âœ… https://app.com/app1")])]),t._v(" "),s("li",[s("p",[t._v("âœ… https://app.com/app1/anything/everything")])]),t._v(" "),s("li",[s("p",[t._v("ðŸš« https://app.com/app2")])])]),t._v(" "),s("p",[s("code",[t._v("'/users/:userId/profile'")])]),t._v(" "),s("ul",[s("li",[t._v("âœ… https://app.com/users/123/profile")]),t._v(" "),s("li",[t._v("âœ… https://app.com/users/123/profile/sub-profile/")]),t._v(" "),s("li",[t._v("ðŸš« https://app.com/users//profile/sub-profile/")]),t._v(" "),s("li",[t._v("ðŸš« https://app.com/users/profile/sub-profile/")])]),t._v(" "),s("p",[s("code",[t._v("'/pathname/#/hash'")])]),t._v(" "),s("ul",[s("li",[t._v("âœ… https://app.com/pathname/#/hash")]),t._v(" "),s("li",[t._v("âœ… https://app.com/pathname/#/hash/route/nested")]),t._v(" "),s("li",[t._v("ðŸš« https://app.com/pathname#/hash/route/nested")]),t._v(" "),s("li",[t._v("ðŸš« https://app.com/pathname#/another-hash")])]),t._v(" "),s("p",[s("code",[t._v("['/pathname/#/hash', '/app1']")])]),t._v(" "),s("ul",[s("li",[t._v("âœ… https://app.com/pathname/#/hash/route/nested")]),t._v(" "),s("li",[t._v("âœ… https://app.com/app1/anything/everything")]),t._v(" "),s("li",[t._v("ðŸš« https://app.com/pathname/app1")]),t._v(" "),s("li",[t._v("ðŸš« https://app.com/app2")])]),t._v(" "),s("p",[t._v("This function is called when the browser url changes, and "),s("code",[t._v("activeRule")]),t._v(" returns "),s("code",[t._v("true")]),t._v(" to indicate that the subapplication needs to be activated.")])]),t._v(" "),s("li",[s("p",[t._v("loader - "),s("code",[t._v("(loading: boolean) => void")]),t._v(" - optional, function will be invoked while the loading state changed.")])]),t._v(" "),s("li",[s("p",[t._v("props - "),s("code",[t._v("object")]),t._v(" - optional, data that the primary application needs to pass to the child application.")])])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("LifeCycles")])]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Lifecycle")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("app"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" RegistrableApp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ul",[s("li",[t._v("beforeLoad - "),s("code",[t._v("Lifecycle | Array<Lifecycle>")]),t._v(" - optional")]),t._v(" "),s("li",[t._v("beforeMount - "),s("code",[t._v("Lifecycle | Array<Lifecycle>")]),t._v(" - optional")]),t._v(" "),s("li",[t._v("afterMount - "),s("code",[t._v("Lifecycle | Array<Lifecycle>")]),t._v(" - optional")]),t._v(" "),s("li",[t._v("beforeUnmount - "),s("code",[t._v("Lifecycle | Array<Lifecycle>")]),t._v(" - optional")]),t._v(" "),s("li",[t._v("afterUnmount - "),s("code",[t._v("Lifecycle | Array<Lifecycle>")]),t._v(" - optional")])])])])]),t._v(" "),s("li",[s("p",[t._v("Usage")]),t._v(" "),s("p",[t._v("Configuration information for registered subapplications in the main application.")])]),t._v(" "),s("li",[s("p",[t._v("Sample")]),t._v(" "),s("div",{staticClass:"language-tsx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-tsx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" registerMicroApps "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'qiankun'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("registerMicroApps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'app1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      entry"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'//localhost:8080'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      container"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#container'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      activeRule"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/react'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      props"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'kuitos'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("beforeLoad")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("app")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'before load'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    beforeMount"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("app")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'before mount'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])]),t._v(" "),s("h3",{attrs:{id:"start-opts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#start-opts"}},[t._v("#")]),t._v(" "),s("code",[t._v("start(opts?)")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Parameters")]),t._v(" "),s("ul",[s("li",[t._v("opts - "),s("code",[t._v("Options")]),t._v(" optional")])])]),t._v(" "),s("li",[s("p",[t._v("Type")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("Options")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("prefetch - "),s("code",[t._v("boolean | 'all' | string[] | (( apps: RegistrableApp[] ) => { criticalAppNames: string[]; minorAppsName: string[] })")]),t._v(" - optional, whether to enable prefetch, default is "),s("code",[t._v("true")]),t._v(".")]),t._v(" "),s("p",[t._v("A configuration of "),s("code",[t._v("true")]),t._v(" starts prefetching static resources for other subapplications after the first subapplication mount completes.")]),t._v(" "),s("p",[t._v("If configured as "),s("code",[t._v("'all'")]),t._v(", the main application "),s("code",[t._v("start")]),t._v(" will begin to preload all subapplication static resources.")]),t._v(" "),s("p",[t._v("If configured as "),s("code",[t._v("string[]")]),t._v(", starts prefetching static resources for subapplications after the first subapplication mount completes which be declared in this list.")]),t._v(" "),s("p",[t._v("If configured as "),s("code",[t._v("function")]),t._v(", the timing of all subapplication static resources will be controlled by yourself.")])]),t._v(" "),s("li",[s("p",[t._v("sandbox - "),s("code",[t._v("boolean")]),t._v(" | "),s("code",[t._v("{ strictStyleIsolation?: boolean }")]),t._v(" - optional, whether to open the js sandbox, default is "),s("code",[t._v("true")]),t._v(".")]),t._v(" "),s("p",[t._v("When configured as "),s("code",[t._v("{strictStyleIsolation: true}")]),t._v(", qiankun will convert the container dom of each application to a "),s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_shadow_DOM",target:"_blank",rel:"noopener noreferrer"}},[t._v("shadow dom"),s("OutboundLink")],1),t._v(", to ensure that the style of the application will not leak to the global.")])]),t._v(" "),s("li",[s("p",[t._v("singular - "),s("code",[t._v("boolean | ((app: RegistrableApp<any>) => Promise<boolean>);")]),t._v(" - optionalï¼Œwhether is a singular modeï¼Œdefault is "),s("code",[t._v("true")]),t._v(".")])]),t._v(" "),s("li",[s("p",[t._v("fetch - "),s("code",[t._v("Function")]),t._v(" - optional")])]),t._v(" "),s("li",[s("p",[t._v("getPublicPath - "),s("code",[t._v("(url: string) => string")]),t._v(" - optional")])]),t._v(" "),s("li",[s("p",[t._v("getTemplate - "),s("code",[t._v("(tpl: string) => string")]),t._v(" - optional")])])])])])]),t._v(" "),s("li",[s("p",[t._v("Usage")]),t._v(" "),s("p",[t._v("Start qiankun.")])]),t._v(" "),s("li",[s("p",[t._v("Sample")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" start "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'qiankun'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])]),t._v(" "),s("h3",{attrs:{id:"setdefaultmountapp-applink"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setdefaultmountapp-applink"}},[t._v("#")]),t._v(" "),s("code",[t._v("setDefaultMountApp(appLink)")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Parameters")]),t._v(" "),s("ul",[s("li",[t._v("appLink - "),s("code",[t._v("string")]),t._v(" - required")])])]),t._v(" "),s("li",[s("p",[t._v("Usage")]),t._v(" "),s("p",[t._v("Sets the child application that enters by default after the main application starts.")])]),t._v(" "),s("li",[s("p",[t._v("Sample")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" setDefaultMountApp "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'qiankun'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDefaultMountApp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/homeApp'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])]),t._v(" "),s("h3",{attrs:{id:"runafterfirstmounted-effect"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#runafterfirstmounted-effect"}},[t._v("#")]),t._v(" "),s("code",[t._v("runAfterFirstMounted(effect)")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Parameters")]),t._v(" "),s("ul",[s("li",[t._v("effect - "),s("code",[t._v("() => void")]),t._v(" - required")])])]),t._v(" "),s("li",[s("p",[t._v("Usage")]),t._v(" "),s("p",[t._v("Methods that need to be called after the first subapplication mount, such as turning on some monitoring or buried scripts.")])]),t._v(" "),s("li",[s("p",[t._v("Sample")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" runAfterFirstMounted "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'qiankun'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("runAfterFirstMounted")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("startMonitor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])]),t._v(" "),s("h2",{attrs:{id:"manually-load-micro-applications"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#manually-load-micro-applications"}},[t._v("#")]),t._v(" Manually load micro applications")]),t._v(" "),s("p",[t._v("It is suitable for scenarios where a micro application needs to be manually loaded / unloaded.")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("Usually in this scenario, the micro application is a business component that can run independently without routing.\nMicro applications should not be split too fine, it is recommended to split according to the business domain. Functional units with close business associations should be made into one micro-application, and conversely, those with less close association can be considered to be split into multiple micro-applications.\nA criterion for judging whether the business is closely related: "),s("strong",[t._v("Look at whether this micro application has frequent communication needs with other micro applications")]),t._v(". If it is possible to show that these two micro-applications are serving the same business scenario, it may be more appropriate to merge them into one micro-application.")])]),t._v(" "),s("h3",{attrs:{id:"loadmicroapp-app-configuration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#loadmicroapp-app-configuration"}},[t._v("#")]),t._v(" "),s("code",[t._v("loadMicroApp(app, configuration?)")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Parameters")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("app - "),s("code",[t._v("LoadableApp")]),t._v(" - Required, basic information of micro application")]),t._v(" "),s("ul",[s("li",[t._v("name - "),s("code",[t._v("string")]),t._v(" - Required, the name of the micro application must be unique among the micro applications.")]),t._v(" "),s("li",[t._v("entry - "),s("code",[t._v("string | { scripts?: string[]; styles?: string[]; html?: string }")]),t._v(" - Required, the entry address of the micro application.")]),t._v(" "),s("li",[t._v("container - "),s("code",[t._v("string | HTMLElement")]),t._v(" - Required, selector or Element instance of the container node of the micro application. Such as "),s("code",[t._v("container: '#root'")]),t._v(" or "),s("code",[t._v("container: document.querySelector('#root')")]),t._v(".")]),t._v(" "),s("li",[t._v("props - "),s("code",[t._v("object")]),t._v(" - Optional, the data that needs to be passed to the micro-application during initialization.")])])]),t._v(" "),s("li",[s("p",[t._v("configuration - "),s("code",[t._v("Configuration")]),t._v(" - Optional, configuration information of the micro application")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("sandbox - "),s("code",[t._v("boolean")]),t._v(" | "),s("code",[t._v("{ strictStyleIsolation?: boolean }")]),t._v(" - Optional, whether to enable the sandbox, the default is "),s("code",[t._v("true")]),t._v(".")]),t._v(" "),s("p",[t._v("When configured as "),s("code",[t._v("{strictStyleIsolation: true}")]),t._v(", it means that strict style isolation mode is enabled. In this mode, qiankun will wrap a "),s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/Web_Components/Using_shadow_DOM",target:"_blank",rel:"noopener noreferrer"}},[t._v("shadow dom"),s("OutboundLink")],1),t._v(" node for each micro-application container, so as to ensure that the style of the micro application will not affect the whole world.")])]),t._v(" "),s("li",[s("p",[t._v("singular - "),s("code",[t._v("boolean | ((app: RegistrableApp<any>) => Promise<boolean>);")]),t._v(" - Optional, whether it is a single instance scenario, the default is "),s("code",[t._v("false")]),t._v(".")])]),t._v(" "),s("li",[s("p",[t._v("fetch - "),s("code",[t._v("Function")]),t._v(" - Optional, custom fetch method.")])]),t._v(" "),s("li",[s("p",[t._v("getPublicPath - "),s("code",[t._v("(url: string) => string")]),t._v(" - Optional")])]),t._v(" "),s("li",[s("p",[t._v("getTemplate - "),s("code",[t._v("(tpl: string) => string")]),t._v(" - Optional")])])])])])]),t._v(" "),s("li",[s("p",[t._v("è¿”å›žå€¼ - "),s("code",[t._v("MicroApp")]),t._v(" - Micro application examples")]),t._v(" "),s("ul",[s("li",[t._v("mount(): Promise"),s("null",[t._v(";")])],1),t._v(" "),s("li",[t._v("unmount(): Promise"),s("null",[t._v(";")])],1),t._v(" "),s("li",[t._v("update(customProps: object): Promise"),s("any",[t._v(";")])],1),t._v(" "),s("li",[t._v('getStatus():\n| "NOT_LOADED"\n| "LOADING_SOURCE_CODE"\n| "NOT_BOOTSTRAPPED"\n| "BOOTSTRAPPING"\n| "NOT_MOUNTED"\n| "MOUNTING"\n| "MOUNTED"\n| "UPDATING"\n| "UNMOUNTING"\n| "UNLOADING"\n| "SKIP_BECAUSE_BROKEN"\n| "LOAD_ERROR";')]),t._v(" "),s("li",[t._v("loadPromise: Promise"),s("null",[t._v(";")])],1),t._v(" "),s("li",[t._v("bootstrapPromise: Promise"),s("null",[t._v(";")])],1),t._v(" "),s("li",[t._v("mountPromise: Promise"),s("null",[t._v(";")])],1),t._v(" "),s("li",[t._v("unmountPromise: Promise"),s("null",[t._v(";")])],1)])]),t._v(" "),s("li",[s("p",[t._v("Usage")]),t._v(" "),s("p",[t._v("Load a micro application manually.")]),t._v(" "),s("p",[t._v("If you need to support the main application to manually update the micro application, you need to export an update hook for the micro application entry:")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("renderApp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Added update hook to allow the main application to manually update the micro application")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("renderPatch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("Sample")]),t._v(" "),s("div",{staticClass:"language-jsx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" loadMicroApp "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'qiankun'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("App")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  \n  microApp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentDidMount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("microApp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadMicroApp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'app1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" entry"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'//localhost:1234'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" container"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#app1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" props"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'qiankun'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentWillUnmount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("microApp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("unmount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentDidUpdate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("microApp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'kuitos'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("app1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),s("h3",{attrs:{id:"prefetchapps-apps-importentryopts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#prefetchapps-apps-importentryopts"}},[t._v("#")]),t._v(" "),s("code",[t._v("prefetchApps(apps, importEntryOpts?)")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Parameters")]),t._v(" "),s("ul",[s("li",[t._v("apps - "),s("code",[t._v("AppMetadata[]")]),t._v(" - Required - list of preloaded apps")]),t._v(" "),s("li",[t._v("importEntryOpts - Optional - Load configuration")])])]),t._v(" "),s("li",[s("p",[t._v("Type")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("AppMetadata")]),t._v(" "),s("ul",[s("li",[t._v("name - "),s("code",[t._v("string")]),t._v(" - Required - Application name")]),t._v(" "),s("li",[t._v("entry - "),s("code",[t._v("string | { scripts?: string[]; styles?: string[]; html?: string }")]),t._v(" - Required,The entry address of the microapp")])])])])]),t._v(" "),s("li",[s("p",[t._v("Usage")]),t._v(" "),s("p",[t._v("Manually preload the specified micro application static resources. Only needed to manually load micro-application scenarios, you can directly configure the "),s("code",[t._v("prefetch")]),t._v(" attribute based on the route automatic activation scenario.")])]),t._v(" "),s("li",[s("p",[t._v("Sample")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" prefetchApps "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'qiankun'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("prefetchApps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'app1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" entry"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'//locahost:7001'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'app2'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" entry"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'//locahost:7002'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])]),t._v(" "),s("h2",{attrs:{id:"adderrorhandler-removeerrorhandler"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#adderrorhandler-removeerrorhandler"}},[t._v("#")]),t._v(" "),s("a",{attrs:{href:"https://single-spa.js.org/docs/api#adderrorhandler",target:"_blank",rel:"noopener noreferrer"}},[t._v("addErrorHandler/removeErrorHandler"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"addglobaluncaughterrorhandler-handler"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#addglobaluncaughterrorhandler-handler"}},[t._v("#")]),t._v(" "),s("code",[t._v("addGlobalUncaughtErrorHandler(handler)")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Parameters")]),t._v(" "),s("ul",[s("li",[t._v("handler - "),s("code",[t._v("(...args: any[]) => void")]),t._v(" - Required")])])]),t._v(" "),s("li",[s("p",[t._v("Usage")]),t._v(" "),s("p",[t._v("Add the global uncaught error hander.")])]),t._v(" "),s("li",[s("p",[t._v("Sample")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" addGlobalUncaughtErrorHandler "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'qiankun'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addGlobalUncaughtErrorHandler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])]),t._v(" "),s("h2",{attrs:{id:"removeglobaluncaughterrorhandler-handler"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#removeglobaluncaughterrorhandler-handler"}},[t._v("#")]),t._v(" "),s("code",[t._v("removeGlobalUncaughtErrorHandler(handler)")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Parameters")]),t._v(" "),s("ul",[s("li",[t._v("handler - "),s("code",[t._v("(...args: any[]) => void")]),t._v(" - Required")])])]),t._v(" "),s("li",[s("p",[t._v("Usage")]),t._v(" "),s("p",[t._v("Remove the global uncaught error hander.")])]),t._v(" "),s("li",[s("p",[t._v("Sample")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" removeGlobalUncaughtErrorHandler "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'qiankun'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeGlobalUncaughtErrorHandler")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("handler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])]),t._v(" "),s("h2",{attrs:{id:"initgloabalstate-state"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#initgloabalstate-state"}},[t._v("#")]),t._v(" "),s("code",[t._v("initGloabalState(state)")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Parameters")]),t._v(" "),s("ul",[s("li",[t._v("state - "),s("code",[t._v("Record<string, any>")]),t._v(" - Required")])])]),t._v(" "),s("li",[s("p",[t._v("Usage")]),t._v(" "),s("p",[t._v("init global state, and return actions for communication. It is recommended to use in master, and slave get actions through propsã€‚")])]),t._v(" "),s("li",[s("p",[t._v("Return")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("MicroAppStateActions")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("onGlobalStateChange: "),s("code",[t._v("(callback: OnGlobalStateChangeCallback, fireImmediately?: boolean) => void")]),t._v(" - Listen the global status in the current application: when state changes will trigger callback; fireImmediately = true, will trigger callback immediately when use this method.")])]),t._v(" "),s("li",[s("p",[t._v("setGlobalState: "),s("code",[t._v("(state: Record<string, any>) => boolean")]),t._v(" - Set global state by first layer props, it can just modify first layer props what has defined.")])]),t._v(" "),s("li",[s("p",[t._v("offGlobalStateChange: "),s("code",[t._v("() => boolean")]),t._v(" - Remove Listener in this app, will default trigger when app unmount.")])])])])])]),t._v(" "),s("li",[s("p",[t._v("Sample")]),t._v(" "),s("p",[t._v("Master:")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" initGloabalState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" MicroAppStateActions "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'qiankun'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Initialize state")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" actions"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" MicroAppStateActions "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initGloabalState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nactions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onGlobalStateChange")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prev")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// state: new state; prev old state")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prev"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nactions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setGlobalState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nactions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("offGlobalStateChange")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("Slave:")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// get actions from mount")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onGlobalStateChange")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prev")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// state: new state; prev old state")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prev"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setGlobalState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// It will trigger when slave umount,  not necessary to use in non special cases.")]),t._v("\n  props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("offGlobalStateChange")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])])])}),[],!1,null,null,null);a.default=e.exports}}]);